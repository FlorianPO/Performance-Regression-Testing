* Présentation
** Intro
   Ce projet permet de déployer et d'exécuter différentes révisions
   SVN de StarPU sur Grid5000 afin d'en récupérer les résultats, dans
   le but de tester les performances de StarPU (pour comparer les versions
   de StarPU, etc...)

** Tehnologies
   - Kameleon : http://kameleon.imag.fr/
     + Déploie sur Grid5000
     + Installe et sauvegarde des images Linux
     + Exécute des scripts
     + Récupère les résultats en local
   - Spack : http://software.llnl.gov/spack/
     + Installe StarPU et ses dépendances
     + En fonction des révisions SVN
   - Scripts Shell et Python

** Hierarchie
   - =Kameleon/=
     - =creation/=
       - =default/=            # ne pas toucher (déploiement grid5000 avec Kameleon)
       - =scripts/=            # contient les scripts à exécuter sur la machine distante
       - =debian_g5k.yaml=     # recette Kameleon pour la création de l'image de base où seront exécutées les expériences
     - =execution/=
       - =default/=            # ne pas toucher (déploiement grid5000 avec Kameleon)
       - =scripts/=            # contient les scripts à exécuter sur la machine distante
       - =scripts_local/=      # contient les scripts à exécuter sur la machine locale
       - =input_data/=         # contient des fichiers CSV (plan d'expérience)
       - =execo_recipe.yaml=   # recette Kameleon pour l'expérience (utilise l'image créée précédemment)

** Installation préalable
   Installer Kameleon : http://kameleon.imag.fr/installation.html
   #+begin_src 
   apt-get install ruby-dev ruby-childprocess polipo libguestfs-tools
   gem install --no-ri --no-rdoc kameleon-builder
   #+end_src

** Utilisation
*** Création
    Pour créer l'image, aller dans =Kameleon/creation/= et faire :
    #+begin_src
    kameleon build debian_g5k.yaml
    #+end_src

    Une image sera générée (.env et .tgz) dans votre dossier personnel
    sur Grid5000 : =~/kameleon_workdir/debian_g5k/<nom de l'image>=

    Par ailleurs, en local, un dossier =build/= sera généré et
    contiendra tout un tas d'informations sur la machine, scripts
    utilisés, ...

*** Exécution
    Pour lancer l'expérience : aller dans =Kameleon/execution/= et faire :
    #+begin_src 
    kameleon build execo_recipe.yaml
    #+end_src

    Le dossier =build/= généré contiendra tous les résultats ainsi que
    les informations de la machine

    Le fichier =input_data/revisions.csv= contient la liste des
    expériences à exécuter.

    Une expérience est constituée de :
    - un nom (quelconque, n'a pas besoin d'être unique)
    - la branche Chameleon
    - la révision Chameleon
    - la branche StarPU
    - la révision StarPU
    - la commande à exécuter dans StarPU

    Les branches ainsi que les commandes sont des alias se trouvant
    respectivement dans les fichiers =input_data/branches.csv= et
    =input_data/commands.csv=

* En détail
** Création
   La création consiste à installer les programmes/dépendances
   statiques sur l'image à générer :
   - prérequis StarPU :
